<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rush Controller — Rush • rush</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rush Controller — Rush"><meta name="description" content="The Rush controller manages workers in a rush network."><meta property="og:description" content="The Rush controller manages workers in a rush network."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rush</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rush.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/controller.html">Controller</a></li>
    <li><a class="dropdown-item" href="../articles/error_handling.html">Error Handling and Debugging</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/rush/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="mlr-org"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Rush Controller</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/rush/blob/main/R/Rush.R" class="external-link"><code>R/Rush.R</code></a></small>
      <div class="d-none name"><code>Rush.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>Rush</code> controller manages workers in a rush network.</p>
    </div>


    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Object of class <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6::R6Class</a> and <code>Rush</code> with controller methods.</p>
    </div>
    <div class="section level2">
    <h2 id="local-workers">Local Workers<a class="anchor" aria-label="anchor" href="#local-workers"></a></h2>


<p>A local worker runs on the same machine as the controller.
Local workers are spawned with the `$start_local_workers() method via the <a href="https://CRAN.R-project.org/package=processx" class="external-link"><span class="pkg">processx</span></a> package.</p>
    </div>
    <div class="section level2">
    <h2 id="remote-workers">Remote Workers<a class="anchor" aria-label="anchor" href="#remote-workers"></a></h2>


<p>A remote worker runs on a different machine than the controller.
Remote workers are spawned with the `$start_remote_workers() method via the <a href="https://CRAN.R-project.org/package=mirai" class="external-link"><span class="pkg">mirai</span></a> package.</p>
    </div>
    <div class="section level2">
    <h2 id="script-workers">Script Workers<a class="anchor" aria-label="anchor" href="#script-workers"></a></h2>


<p>Workers can be started with a script anywhere.
The only requirement is that the worker can connect to the Redis database.
The script is created with the <code>$worker_script()</code> method.</p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>network_id</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Identifier of the rush network.</p></dd>


<dt><code>config</code></dt>
<dd><p>(<a href="https://rdrr.io/pkg/redux/man/redis_config.html" class="external-link">redux::redis_config</a>)<br>
Redis configuration options.</p></dd>


<dt><code>connector</code></dt>
<dd><p>(<a href="https://rdrr.io/pkg/redux/man/redis_api.html" class="external-link">redux::redis_api</a>)<br>
Returns a connection to Redis.</p></dd>


<dt><code>processes_processx</code></dt>
<dd><p>(<a href="http://processx.r-lib.org/reference/process.html" class="external-link">processx::process</a>)<br>
List of processes started with <code>$start_local_workers()</code>.</p></dd>


<dt><code>processes_mirai</code></dt>
<dd><p>(<a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai</a>)<br>
List of mirai processes started with <code>$start_remote_workers()</code>.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>n_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of workers.</p></dd>


<dt><code>n_running_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of running workers.</p></dd>


<dt><code>n_terminated_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of terminated workers.</p></dd>


<dt><code>n_killed_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of killed workers.</p></dd>


<dt><code>n_lost_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of lost workers.
Run <code>$detect_lost_workers()</code> to update the number of lost workers.</p></dd>


<dt><code>n_pre_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of workers that are not yet completely started.</p></dd>


<dt><code>worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Ids of workers.</p></dd>


<dt><code>running_worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Ids of running workers.</p></dd>


<dt><code>terminated_worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Ids of terminated workers.</p></dd>


<dt><code>killed_worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Ids of killed workers.</p></dd>


<dt><code>lost_worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Ids of lost workers.</p></dd>


<dt><code>pre_worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Ids of workers that are not yet completely started.</p></dd>


<dt><code>tasks</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of all tasks.</p></dd>


<dt><code>queued_tasks</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of queued tasks.</p></dd>


<dt><code>running_tasks</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of running tasks.</p></dd>


<dt><code>finished_tasks</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of finished tasks.</p></dd>


<dt><code>failed_tasks</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of failed tasks.</p></dd>


<dt><code>n_queued_tasks</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of queued tasks.</p></dd>


<dt><code>n_queued_priority_tasks</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of queued priority tasks.</p></dd>


<dt><code>n_running_tasks</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of running tasks.</p></dd>


<dt><code>n_finished_tasks</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of finished tasks.</p></dd>


<dt><code>n_failed_tasks</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of failed tasks.</p></dd>


<dt><code>n_tasks</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of all tasks.</p></dd>


<dt><code>worker_info</code></dt>
<dd><p>(<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code>)<br>
Contains information about the workers.</p></dd>


<dt><code>worker_states</code></dt>
<dd><p>(<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code>)<br>
Contains the states of the workers.</p></dd>


<dt><code>all_workers_terminated</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether all workers are terminated.</p></dd>


<dt><code>all_workers_lost</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether all workers are lost.
Runs <code>$detect_lost_workers()</code> to detect lost workers.</p></dd>


<dt><code>priority_info</code></dt>
<dd><p>(<a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a>)<br>
Contains the number of tasks in the priority queues.</p></dd>


<dt><code>snapshot_schedule</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Set a snapshot schedule to periodically save the data base on disk.
For example, <code>c(60, 1000)</code> saves the data base every 60 seconds if there are at least 1000 changes.
Overwrites the redis configuration file.
Set to <code>NULL</code> to disable snapshots.
For more details see <a href="https://redis.io/docs/latest/operate/oss_and_stack/management/persistence/" class="external-link">redis.io</a>.</p></dd>


<dt><code>redis_info</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
Information about the Redis server.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-Rush-new"><code>Rush$new()</code></a></p></li>
<li><p><a href="#method-Rush-format"><code>Rush$format()</code></a></p></li>
<li><p><a href="#method-Rush-print"><code>Rush$print()</code></a></p></li>
<li><p><a href="#method-Rush-reconnect"><code>Rush$reconnect()</code></a></p></li>
<li><p><a href="#method-Rush-start_local_workers"><code>Rush$start_local_workers()</code></a></p></li>
<li><p><a href="#method-Rush-start_remote_workers"><code>Rush$start_remote_workers()</code></a></p></li>
<li><p><a href="#method-Rush-worker_script"><code>Rush$worker_script()</code></a></p></li>
<li><p><a href="#method-Rush-restart_workers"><code>Rush$restart_workers()</code></a></p></li>
<li><p><a href="#method-Rush-wait_for_workers"><code>Rush$wait_for_workers()</code></a></p></li>
<li><p><a href="#method-Rush-stop_workers"><code>Rush$stop_workers()</code></a></p></li>
<li><p><a href="#method-Rush-detect_lost_workers"><code>Rush$detect_lost_workers()</code></a></p></li>
<li><p><a href="#method-Rush-reset"><code>Rush$reset()</code></a></p></li>
<li><p><a href="#method-Rush-read_log"><code>Rush$read_log()</code></a></p></li>
<li><p><a href="#method-Rush-print_log"><code>Rush$print_log()</code></a></p></li>
<li><p><a href="#method-Rush-push_tasks"><code>Rush$push_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-push_priority_tasks"><code>Rush$push_priority_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-push_failed"><code>Rush$push_failed()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_queued_tasks"><code>Rush$fetch_queued_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_priority_tasks"><code>Rush$fetch_priority_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_running_tasks"><code>Rush$fetch_running_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_finished_tasks"><code>Rush$fetch_finished_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-wait_for_finished_tasks"><code>Rush$wait_for_finished_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_new_tasks"><code>Rush$fetch_new_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-wait_for_new_tasks"><code>Rush$wait_for_new_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_failed_tasks"><code>Rush$fetch_failed_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_tasks"><code>Rush$fetch_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-fetch_tasks_with_state"><code>Rush$fetch_tasks_with_state()</code></a></p></li>
<li><p><a href="#method-Rush-wait_for_tasks"><code>Rush$wait_for_tasks()</code></a></p></li>
<li><p><a href="#method-Rush-write_hashes"><code>Rush$write_hashes()</code></a></p></li>
<li><p><a href="#method-Rush-read_hashes"><code>Rush$read_hashes()</code></a></p></li>
<li><p><a href="#method-Rush-read_hash"><code>Rush$read_hash()</code></a></p></li>
<li><p><a href="#method-Rush-is_running_task"><code>Rush$is_running_task()</code></a></p></li>
<li><p><a href="#method-Rush-is_failed_task"><code>Rush$is_failed_task()</code></a></p></li>
<li><p><a href="#method-Rush-tasks_with_state"><code>Rush$tasks_with_state()</code></a></p></li>
<li><p><a href="#method-Rush-clone"><code>Rush$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-Rush-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Creates a new instance of this <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/Rush.html">Rush</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>network_id <span class="op">=</span> <span class="cn">NULL</span>, config <span class="op">=</span> <span class="cn">NULL</span>, seed <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>network_id</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Identifier of the rush network.
Controller and workers must have the same instance id.
Keys in Redis are prefixed with the instance id.</p></dd>


<dt><code>config</code></dt>
<dd><p>(<a href="https://rdrr.io/pkg/redux/man/redis_config.html" class="external-link">redux::redis_config</a>)<br>
Redis configuration options.
If <code>NULL</code>, configuration set by <code><a href="rush_plan.html">rush_plan()</a></code> is used.
If <code><a href="rush_plan.html">rush_plan()</a></code> has not been called, the <code>REDIS_URL</code> environment variable is parsed.
If <code>REDIS_URL</code> is not set, a default configuration is used.
See <a href="https://rdrr.io/pkg/redux/man/redis_config.html" class="external-link">redux::redis_config</a> for details.</p></dd>


<dt><code>seed</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code>)<br>
Initial seed for the random number generator.
Either a L'Ecuyer-CMRG seed (<code>integer(7)</code>) or a regular RNG seed (<code>integer(1)</code>).
The later is converted to a L'Ecuyer-CMRG seed.
If <code>NULL</code>, no seed is used for the random number generator.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-format"></a><div class="section">
<h3 id="method-format-">Method <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code><a class="anchor" aria-label="anchor" href="#method-format-"></a></h3>
<p>Helper for print outputs.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">format</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>(ignored).</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>).</p>
</div>

</div><p></p><hr><a id="method-Rush-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print method.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>).</p>
</div>

</div><p></p><hr><a id="method-Rush-reconnect"></a><div class="section">
<h3 id="method-reconnect-">Method <code>reconnect()</code><a class="anchor" aria-label="anchor" href="#method-reconnect-"></a></h3>
<p>Reconnect to Redis.
The connection breaks when the Rush object is saved to disk.
Call this method to reconnect after loading the object.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">reconnect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Rush-start_local_workers"></a><div class="section">
<h3 id="method-start-local-workers-">Method <code>start_local_workers()</code><a class="anchor" aria-label="anchor" href="#method-start-local-workers-"></a></h3>
<p>Start workers locally with <code>processx</code>.
The <a href="http://processx.r-lib.org/reference/process.html" class="external-link">processx::process</a> are stored in <code>$processes_processx</code>.
Alternatively, use <code>$start_remote_workers()</code> to start workers on remote machines with <code>mirai</code>.
Parameters set by <code><a href="rush_plan.html">rush_plan()</a></code> have precedence over the parameters set here.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">start_local_workers</span><span class="op">(</span></span>
<span>  worker_loop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  n_workers <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  globals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  packages <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lgr_thresholds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lgr_buffer_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  supervise <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  message_log <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_log <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>worker_loop</code></dt>
<dd><p>(<code>function</code>)<br>
Loop run on the workers.</p></dd>


<dt><code>...</code></dt>
<dd><p>(<code>any</code>)<br>
Arguments passed to <code>worker_loop</code>.</p></dd>


<dt><code>n_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of workers to be started.
Default is <code>1</code>.</p></dd>


<dt><code>globals</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Global variables to be loaded to the workers global environment.</p></dd>


<dt><code>packages</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Packages to be loaded by the workers.</p></dd>


<dt><code>lgr_thresholds</code></dt>
<dd><p>(named <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> | named <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code>)<br>
Logger threshold on the workers e.g. <code>c("mlr3/rush" = "debug")</code>.</p></dd>


<dt><code>lgr_buffer_size</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
By default (<code>lgr_buffer_size = 0</code>), the log messages are directly saved in the Redis data store.
If <code>lgr_buffer_size &gt; 0</code>, the log messages are buffered and saved in the Redis data store when the buffer is full.
This improves the performance of the logging.</p></dd>


<dt><code>supervise</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to kill the workers when the main R process is shut down.</p></dd>


<dt><code>message_log</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Path to the message log files e.g. <code>/tmp/message_logs/</code>
The message log files are named <code>message_&lt;worker_id&gt;.log</code>.
If <code>NULL</code>, no messages, warnings or errors are stored.</p></dd>


<dt><code>output_log</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Path to the output log files e.g. <code>/tmp/output_logs/</code>
The output log files are named <code>output_&lt;worker_id&gt;.log</code>.
If <code>NULL</code>, no output is stored.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-start_remote_workers"></a><div class="section">
<h3 id="method-start-remote-workers-">Method <code>start_remote_workers()</code><a class="anchor" aria-label="anchor" href="#method-start-remote-workers-"></a></h3>
<p>Start workers on remote machines with <code>mirai</code>.
The <a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai</a> are stored in <code>$processes_mirai</code>.
Parameters set by <code><a href="rush_plan.html">rush_plan()</a></code> have precedence over the parameters set here.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">start_remote_workers</span><span class="op">(</span></span>
<span>  <span class="va">worker_loop</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  n_workers <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  globals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  packages <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lgr_thresholds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lgr_buffer_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  message_log <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_log <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>worker_loop</code></dt>
<dd><p>(<code>function</code>)<br>
Loop run on the workers.</p></dd>


<dt><code>...</code></dt>
<dd><p>(<code>any</code>)<br>
Arguments passed to <code>worker_loop</code>.</p></dd>


<dt><code>n_workers</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of workers to be started.
Default is <code>1</code>.</p></dd>


<dt><code>globals</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Global variables to be loaded to the workers global environment.</p></dd>


<dt><code>packages</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Packages to be loaded by the workers.</p></dd>


<dt><code>lgr_thresholds</code></dt>
<dd><p>(named <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> | named <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code>)<br>
Logger threshold on the workers e.g. <code>c("mlr3/rush" = "debug")</code>.</p></dd>


<dt><code>lgr_buffer_size</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
By default (<code>lgr_buffer_size = 0</code>), the log messages are directly saved in the Redis data store.
If <code>lgr_buffer_size &gt; 0</code>, the log messages are buffered and saved in the Redis data store when the buffer is full.
This improves the performance of the logging.</p></dd>


<dt><code>message_log</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Path to the message log files e.g. <code>/tmp/message_logs/</code>
The message log files are named <code>message_&lt;worker_id&gt;.log</code>.
If <code>NULL</code>, no messages, warnings or errors are stored.</p></dd>


<dt><code>output_log</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Path to the output log files e.g. <code>/tmp/output_logs/</code>
The output log files are named <code>output_&lt;worker_id&gt;.log</code>.
If <code>NULL</code>, no output is stored.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-worker_script"></a><div class="section">
<h3 id="method-worker-script-">Method <code>worker_script()</code><a class="anchor" aria-label="anchor" href="#method-worker-script-"></a></h3>
<p>Generate a script to start workers.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">worker_script</span><span class="op">(</span></span>
<span>  <span class="va">worker_loop</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  globals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  packages <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lgr_thresholds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lgr_buffer_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heartbeat_period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heartbeat_expire <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  message_log <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_log <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>worker_loop</code></dt>
<dd><p>(<code>function</code>)<br>
Loop run on the workers.</p></dd>


<dt><code>...</code></dt>
<dd><p>(<code>any</code>)<br>
Arguments passed to <code>worker_loop</code>.</p></dd>


<dt><code>globals</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Global variables to be loaded to the workers global environment.</p></dd>


<dt><code>packages</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Packages to be loaded by the workers.</p></dd>


<dt><code>lgr_thresholds</code></dt>
<dd><p>(named <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> | named <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code>)<br>
Logger threshold on the workers e.g. <code>c("mlr3/rush" = "debug")</code>.</p></dd>


<dt><code>lgr_buffer_size</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
By default (<code>lgr_buffer_size = 0</code>), the log messages are directly saved in the Redis data store.
If <code>lgr_buffer_size &gt; 0</code>, the log messages are buffered and saved in the Redis data store when the buffer is full.
This improves the performance of the logging.</p></dd>


<dt><code>heartbeat_period</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Period of the heartbeat in seconds.
The heartbeat is updated every <code>heartbeat_period</code> seconds.</p></dd>


<dt><code>heartbeat_expire</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Time to live of the heartbeat in seconds.
The heartbeat key is set to expire after <code>heartbeat_expire</code> seconds.</p></dd>


<dt><code>message_log</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Path to the message log files e.g. <code>/tmp/message_logs/</code>
The message log files are named <code>message_&lt;worker_id&gt;.log</code>.
If <code>NULL</code>, no messages, warnings or errors are stored.</p></dd>


<dt><code>output_log</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Path to the output log files e.g. <code>/tmp/output_logs/</code>
The output log files are named <code>output_&lt;worker_id&gt;.log</code>.
If <code>NULL</code>, no output is stored.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-restart_workers"></a><div class="section">
<h3 id="method-restart-workers-">Method <code>restart_workers()</code><a class="anchor" aria-label="anchor" href="#method-restart-workers-"></a></h3>
<p>Restart workers.
If the worker is is still running, it is killed and restarted.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">restart_workers</span><span class="op">(</span><span class="va">worker_ids</span>, supervise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Worker ids to be restarted.</p></dd>


<dt><code>supervise</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to kill the workers when the main R process is shut down.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-wait_for_workers"></a><div class="section">
<h3 id="method-wait-for-workers-">Method <code>wait_for_workers()</code><a class="anchor" aria-label="anchor" href="#method-wait-for-workers-"></a></h3>
<p>Wait until <code>n</code> workers are available.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">wait_for_workers</span><span class="op">(</span><span class="va">n</span>, timeout <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of workers to wait for.</p></dd>


<dt><code>timeout</code></dt>
<dd><p>(<code>numeric(1)</code>)<br>
Timeout in seconds.
Default is <code>Inf</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-stop_workers"></a><div class="section">
<h3 id="method-stop-workers-">Method <code>stop_workers()</code><a class="anchor" aria-label="anchor" href="#method-stop-workers-"></a></h3>
<p>Stop workers.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">stop_workers</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"kill"</span>, worker_ids <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>type</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Type of stopping.
Either <code>"terminate"</code> or <code>"kill"</code>.
If <code>"kill"</code> the workers are stopped immediately.
If <code>"terminate"</code> the workers evaluate the currently running task and then terminate.
The <code>"terminate"</code> option must be implemented in the worker loop.</p></dd>


<dt><code>worker_ids</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Worker ids to be stopped.
Remote workers must all be killed together.
If <code>NULL</code> all workers are stopped.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-detect_lost_workers"></a><div class="section">
<h3 id="method-detect-lost-workers-">Method <code>detect_lost_workers()</code><a class="anchor" aria-label="anchor" href="#method-detect-lost-workers-"></a></h3>
<p>Detect lost workers.
The state of the worker is changed to <code>"lost"</code>.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">detect_lost_workers</span><span class="op">(</span>restart_local_workers <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>restart_local_workers</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to restart lost workers.
Ignored for remote workers.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-reset"></a><div class="section">
<h3 id="method-reset-">Method <code>reset()</code><a class="anchor" aria-label="anchor" href="#method-reset-"></a></h3>
<p>Stop workers and delete data stored in redis.</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">reset</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"kill"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>type</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Type of stopping.
Either <code>"terminate"</code> or <code>"kill"</code>.
If <code>"terminate"</code> the workers evaluate the currently running task and then terminate.
If <code>"kill"</code> the workers are stopped immediately.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-read_log"></a><div class="section">
<h3 id="method-read-log-">Method <code>read_log()</code><a class="anchor" aria-label="anchor" href="#method-read-log-"></a></h3>
<p>Read log messages written with the <code>lgr</code> package from a worker.</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">read_log</span><span class="op">(</span>worker_ids <span class="op">=</span> <span class="cn">NULL</span>, time_difference <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>worker_ids</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Worker ids.
If <code>NULL</code> all worker ids are used.</p></dd>


<dt><code>time_difference</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to calculate the time difference between log messages.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>(<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code>) with level, timestamp, logger, caller and message, and optionally time difference.</p>
</div>

</div><p></p><hr><a id="method-Rush-print_log"></a><div class="section">
<h3 id="method-print-log-">Method <code>print_log()</code><a class="anchor" aria-label="anchor" href="#method-print-log-"></a></h3>
<p>Print log messages written with the <code>lgr</code> package from a worker.</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">print_log</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Rush-push_tasks"></a><div class="section">
<h3 id="method-push-tasks-">Method <code>push_tasks()</code><a class="anchor" aria-label="anchor" href="#method-push-tasks-"></a></h3>
<p>Pushes a task to the queue.
Task is added to queued tasks.</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">push_tasks</span><span class="op">(</span></span>
<span>  <span class="va">xss</span>,</span>
<span>  extra <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seeds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timeouts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_retries <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  terminate_workers <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>xss</code></dt>
<dd><p>(list of named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
Lists of arguments for the function e.g. <code>list(list(x1, x2), list(x1, x2)))</code>.</p></dd>


<dt><code>extra</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
List of additional information stored along with the task e.g. <code>list(list(timestamp), list(timestamp)))</code>.</p></dd>


<dt><code>seeds</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
List of L'Ecuyer-CMRG seeds for each task e.g <code>list(list(c(104071, 490840688, 1690070564, -495119766, 503491950, 1801530932, -1629447803)))</code>.
If <code>NULL</code> but an initial seed is set, L'Ecuyer-CMRG seeds are generated from the initial seed.
If <code>NULL</code> and no initial seed is set, no seeds are used for the random number generator.</p></dd>


<dt><code>timeouts</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code>)<br>
Timeouts for each task in seconds e.g. <code>c(10, 15)</code>.
A single number is used as the timeout for all tasks.
If <code>NULL</code> no timeout is set.</p></dd>


<dt><code>max_retries</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code>)<br>
Number of retries for each task.
A single number is used as the number of retries for all tasks.
If <code>NULL</code> tasks are not retried.</p></dd>


<dt><code>terminate_workers</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to stop the workers after evaluating the tasks.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of the tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-push_priority_tasks"></a><div class="section">
<h3 id="method-push-priority-tasks-">Method <code>push_priority_tasks()</code><a class="anchor" aria-label="anchor" href="#method-push-priority-tasks-"></a></h3>
<p>Pushes a task to the queue of a specific worker.
Task is added to queued priority tasks.
A worker evaluates the tasks in the priority queue before the shared queue.
If <code>priority</code> is <code>NA</code> the task is added to the shared queue.
If the worker is lost or worker id is not known, the task is added to the shared queue.</p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">push_priority_tasks</span><span class="op">(</span><span class="va">xss</span>, extra <span class="op">=</span> <span class="cn">NULL</span>, priority <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>xss</code></dt>
<dd><p>(list of named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
Lists of arguments for the function e.g. <code>list(list(x1, x2), list(x1, x2)))</code>.</p></dd>


<dt><code>extra</code></dt>
<dd><p>(<code>list</code>)<br>
List of additional information stored along with the task e.g. <code>list(list(timestamp), list(timestamp)))</code>.</p></dd>


<dt><code>priority</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Worker ids to which the tasks should be pushed.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of the tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-push_failed"></a><div class="section">
<h3 id="method-push-failed-">Method <code>push_failed()</code><a class="anchor" aria-label="anchor" href="#method-push-failed-"></a></h3>
<p>Pushes failed tasks to the data base.</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">push_failed</span><span class="op">(</span><span class="va">keys</span>, <span class="va">conditions</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>keys</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Keys of the associated tasks.</p></dd>


<dt><code>conditions</code></dt>
<dd><p>(named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
List of lists of conditions.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-fetch_queued_tasks"></a><div class="section">
<h3 id="method-fetch-queued-tasks-">Method <code>fetch_queued_tasks()</code><a class="anchor" aria-label="anchor" href="#method-fetch-queued-tasks-"></a></h3>
<p>Fetch queued tasks from the data base.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_queued_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"xs_extra"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra")</code>.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p><code>data.table()</code><br>
Table of queued tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-fetch_priority_tasks"></a><div class="section">
<h3 id="method-fetch-priority-tasks-">Method <code>fetch_priority_tasks()</code><a class="anchor" aria-label="anchor" href="#method-fetch-priority-tasks-"></a></h3>
<p>Fetch queued priority tasks from the data base.</p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_priority_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"xs_extra"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra")</code>.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p><code>data.table()</code><br>
Table of queued priority tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-fetch_running_tasks"></a><div class="section">
<h3 id="method-fetch-running-tasks-">Method <code>fetch_running_tasks()</code><a class="anchor" aria-label="anchor" href="#method-fetch-running-tasks-"></a></h3>
<p>Fetch running tasks from the data base.</p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_running_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"xs_extra"</span>, <span class="st">"worker_extra"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-16">Arguments<a class="anchor" aria-label="anchor" href="#arguments-16"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra", "worker_extra")</code>.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>
<p><code>data.table()</code><br>
Table of running tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-fetch_finished_tasks"></a><div class="section">
<h3 id="method-fetch-finished-tasks-">Method <code>fetch_finished_tasks()</code><a class="anchor" aria-label="anchor" href="#method-fetch-finished-tasks-"></a></h3>
<p>Fetch finished tasks from the data base.
Finished tasks are cached.</p><div class="section">
<h4 id="usage-20">Usage<a class="anchor" aria-label="anchor" href="#usage-20"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_finished_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"ys"</span>, <span class="st">"xs_extra"</span>, <span class="st">"worker_extra"</span>, <span class="st">"ys_extra"</span>, <span class="st">"condition"</span><span class="op">)</span>,</span>
<span>  reset_cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-17">Arguments<a class="anchor" aria-label="anchor" href="#arguments-17"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra", "worker_extra", "ys", "ys_extra")</code>.</p></dd>


<dt><code>reset_cache</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to reset the cache.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-8">Returns<a class="anchor" aria-label="anchor" href="#returns-8"></a></h4>
<p><code>data.table()</code><br>
Table of finished tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-wait_for_finished_tasks"></a><div class="section">
<h3 id="method-wait-for-finished-tasks-">Method <code>wait_for_finished_tasks()</code><a class="anchor" aria-label="anchor" href="#method-wait-for-finished-tasks-"></a></h3>
<p>Block process until a new finished task is available.
Returns all finished tasks or <code>NULL</code> if no new task is available after <code>timeout</code> seconds.</p><div class="section">
<h4 id="usage-21">Usage<a class="anchor" aria-label="anchor" href="#usage-21"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">wait_for_finished_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"ys"</span>, <span class="st">"xs_extra"</span>, <span class="st">"worker_extra"</span>, <span class="st">"ys_extra"</span><span class="op">)</span>,</span>
<span>  timeout <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-18">Arguments<a class="anchor" aria-label="anchor" href="#arguments-18"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra", "worker_extra", "ys", "ys_extra")</code>.</p></dd>


<dt><code>timeout</code></dt>
<dd><p>(<code>numeric(1)</code>)<br>
Time to wait for a result in seconds.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-9">Returns<a class="anchor" aria-label="anchor" href="#returns-9"></a></h4>
<p><code>data.table()</code><br>
Table of finished tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-fetch_new_tasks"></a><div class="section">
<h3 id="method-fetch-new-tasks-">Method <code>fetch_new_tasks()</code><a class="anchor" aria-label="anchor" href="#method-fetch-new-tasks-"></a></h3>
<p>Fetch finished tasks from the data base that finished after the last fetch.
Updates the cache of the finished tasks.</p><div class="section">
<h4 id="usage-22">Usage<a class="anchor" aria-label="anchor" href="#usage-22"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_new_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"ys"</span>, <span class="st">"xs_extra"</span>, <span class="st">"worker_extra"</span>, <span class="st">"ys_extra"</span>, <span class="st">"condition"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-19">Arguments<a class="anchor" aria-label="anchor" href="#arguments-19"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-10">Returns<a class="anchor" aria-label="anchor" href="#returns-10"></a></h4>
<p><code>data.table()</code><br>
Latest results.</p>
</div>

</div><p></p><hr><a id="method-Rush-wait_for_new_tasks"></a><div class="section">
<h3 id="method-wait-for-new-tasks-">Method <code>wait_for_new_tasks()</code><a class="anchor" aria-label="anchor" href="#method-wait-for-new-tasks-"></a></h3>
<p>Block process until a new finished task is available.
Returns new tasks or <code>NULL</code> if no new task is available after <code>timeout</code> seconds.</p><div class="section">
<h4 id="usage-23">Usage<a class="anchor" aria-label="anchor" href="#usage-23"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">wait_for_new_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"ys"</span>, <span class="st">"xs_extra"</span>, <span class="st">"worker_extra"</span>, <span class="st">"ys_extra"</span>, <span class="st">"condition"</span><span class="op">)</span>,</span>
<span>  timeout <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-20">Arguments<a class="anchor" aria-label="anchor" href="#arguments-20"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra", "worker_extra", "ys", "ys_extra")</code>.</p></dd>


<dt><code>timeout</code></dt>
<dd><p>(<code>numeric(1)</code>)<br>
Time to wait for new result in seconds.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-11">Returns<a class="anchor" aria-label="anchor" href="#returns-11"></a></h4>
<p><code>data.table() | list()</code>.</p>
</div>

</div><p></p><hr><a id="method-Rush-fetch_failed_tasks"></a><div class="section">
<h3 id="method-fetch-failed-tasks-">Method <code>fetch_failed_tasks()</code><a class="anchor" aria-label="anchor" href="#method-fetch-failed-tasks-"></a></h3>
<p>Fetch failed tasks from the data base.</p><div class="section">
<h4 id="usage-24">Usage<a class="anchor" aria-label="anchor" href="#usage-24"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_failed_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"worker_extra"</span>, <span class="st">"condition"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-21">Arguments<a class="anchor" aria-label="anchor" href="#arguments-21"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra", "worker_extra", "condition"</code>.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-12">Returns<a class="anchor" aria-label="anchor" href="#returns-12"></a></h4>
<p><code>data.table()</code><br>
Table of failed tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-fetch_tasks"></a><div class="section">
<h3 id="method-fetch-tasks-">Method <code>fetch_tasks()</code><a class="anchor" aria-label="anchor" href="#method-fetch-tasks-"></a></h3>
<p>Fetch all tasks from the data base.</p><div class="section">
<h4 id="usage-25">Usage<a class="anchor" aria-label="anchor" href="#usage-25"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_tasks</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"ys"</span>, <span class="st">"xs_extra"</span>, <span class="st">"worker_extra"</span>, <span class="st">"ys_extra"</span>, <span class="st">"condition"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-22">Arguments<a class="anchor" aria-label="anchor" href="#arguments-22"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "xs_extra", "worker_extra", "ys", "ys_extra", "condition", "state")</code>.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-13">Returns<a class="anchor" aria-label="anchor" href="#returns-13"></a></h4>
<p><code>data.table()</code><br>
Table of all tasks.</p>
</div>

</div><p></p><hr><a id="method-Rush-fetch_tasks_with_state"></a><div class="section">
<h3 id="method-fetch-tasks-with-state-">Method <code>fetch_tasks_with_state()</code><a class="anchor" aria-label="anchor" href="#method-fetch-tasks-with-state-"></a></h3>
<p>Fetch tasks with different states from the data base.
If tasks with different states are to be queried at the same time, this function prevents tasks from appearing twice.
This could be the case if a worker changes the state of a task while the tasks are being fetched.
Finished tasks are cached.</p><div class="section">
<h4 id="usage-26">Usage<a class="anchor" aria-label="anchor" href="#usage-26"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">fetch_tasks_with_state</span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xs"</span>, <span class="st">"ys"</span>, <span class="st">"xs_extra"</span>, <span class="st">"worker_extra"</span>, <span class="st">"ys_extra"</span>, <span class="st">"condition"</span><span class="op">)</span>,</span>
<span>  states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"queued"</span>, <span class="st">"running"</span>, <span class="st">"finished"</span>, <span class="st">"failed"</span><span class="op">)</span>,</span>
<span>  reset_cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"data.table"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-23">Arguments<a class="anchor" aria-label="anchor" href="#arguments-23"></a></h4>
<p></p><div class="arguments"><dl><dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.
Defaults to <code>c("xs", "ys", "xs_extra", "worker_extra", "ys_extra")</code>.</p></dd>


<dt><code>states</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
States of the tasks to be fetched.
Defaults to <code>c("queued", "running", "finished", "failed")</code>.</p></dd>


<dt><code>reset_cache</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to reset the cache of the finished tasks.</p></dd>


<dt><code>data_format</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Returned data format.
Choose <code>"data.table"</code> or "list".
The default is <code>"data.table"</code> but <code>"list"</code> is easier when list columns are present.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-wait_for_tasks"></a><div class="section">
<h3 id="method-wait-for-tasks-">Method <code>wait_for_tasks()</code><a class="anchor" aria-label="anchor" href="#method-wait-for-tasks-"></a></h3>
<p>Wait until tasks are finished.
The function also unblocks when no worker is running or all tasks failed.</p><div class="section">
<h4 id="usage-27">Usage<a class="anchor" aria-label="anchor" href="#usage-27"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">wait_for_tasks</span><span class="op">(</span><span class="va">keys</span>, detect_lost_workers <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-24">Arguments<a class="anchor" aria-label="anchor" href="#arguments-24"></a></h4>
<p></p><div class="arguments"><dl><dt><code>keys</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of the tasks to wait for.</p></dd>


<dt><code>detect_lost_workers</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to detect failed tasks.
Comes with an overhead.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-write_hashes"></a><div class="section">
<h3 id="method-write-hashes-">Method <code>write_hashes()</code><a class="anchor" aria-label="anchor" href="#method-write-hashes-"></a></h3>
<p>Writes R objects to Redis hashes.
The function takes the vectors in <code>...</code> as input and writes each element as a field-value pair to a new hash.
The name of the argument defines the field into which the serialized element is written.
For example, <code>xs = list(list(x1 = 1, x2 = 2), list(x1 = 3, x2 = 4))</code> writes <code>serialize(list(x1 = 1, x2 = 2))</code> at field <code>xs</code> into a hash and <code>serialize(list(x1 = 3, x2 = 4))</code> at field <code>xs</code> into another hash.
The function can iterate over multiple vectors simultaneously.
For example, <code>xs = list(list(x1 = 1, x2 = 2), list(x1 = 3, x2 = 4)), ys = list(list(y = 3), list(y = 7))</code> creates two hashes with the fields <code>xs</code> and <code>ys</code>.
The vectors are recycled to the length of the longest vector.
Both lists and atomic vectors are supported.
Arguments that are <code>NULL</code> are ignored.</p><div class="section">
<h4 id="usage-28">Usage<a class="anchor" aria-label="anchor" href="#usage-28"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">write_hashes</span><span class="op">(</span><span class="va">...</span>, .values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, keys <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-25">Arguments<a class="anchor" aria-label="anchor" href="#arguments-25"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>(named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
Lists to be written to the hashes.
The names of the arguments are used as fields.</p></dd>


<dt><code>.values</code></dt>
<dd><p>(named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
Lists to be written to the hashes.
The names of the list are used as fields.</p></dd>


<dt><code>keys</code></dt>
<dd><p>(character())<br>
Keys of the hashes.
If <code>NULL</code> new keys are generated.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-14">Returns<a class="anchor" aria-label="anchor" href="#returns-14"></a></h4>
<p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of the hashes.</p>
</div>

</div><p></p><hr><a id="method-Rush-read_hashes"></a><div class="section">
<h3 id="method-read-hashes-">Method <code>read_hashes()</code><a class="anchor" aria-label="anchor" href="#method-read-hashes-"></a></h3>
<p>Reads R Objects from Redis hashes.
The function reads the field-value pairs of the hashes stored at <code>keys</code>.
The values of a hash are deserialized and combined to a list.
If <code>flatten</code> is <code>TRUE</code>, the values are flattened to a single list e.g. list(xs = list(x1 = 1, x2 = 2), ys = list(y = 3)) becomes list(x1 = 1, x2 = 2, y = 3).
The reading functions combine the hashes to a table where the names of the inner lists are the column names.
For example, <code>xs = list(list(x1 = 1, x2 = 2), list(x1 = 3, x2 = 4)), ys = list(list(y = 3), list(y = 7))</code> becomes <code>data.table(x1 = c(1, 3), x2 = c(2, 4), y = c(3, 7))</code>.</p><div class="section">
<h4 id="usage-29">Usage<a class="anchor" aria-label="anchor" href="#usage-29"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">read_hashes</span><span class="op">(</span><span class="va">keys</span>, <span class="va">fields</span>, flatten <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-26">Arguments<a class="anchor" aria-label="anchor" href="#arguments-26"></a></h4>
<p></p><div class="arguments"><dl><dt><code>keys</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of the hashes.</p></dd>


<dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hashes.</p></dd>


<dt><code>flatten</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to flatten the list.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-15">Returns<a class="anchor" aria-label="anchor" href="#returns-15"></a></h4>
<p>(list of <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
The outer list contains one element for each key.
The inner list is the combination of the lists stored at the different fields.</p>
</div>

</div><p></p><hr><a id="method-Rush-read_hash"></a><div class="section">
<h3 id="method-read-hash-">Method <code>read_hash()</code><a class="anchor" aria-label="anchor" href="#method-read-hash-"></a></h3>
<p>Reads a single Redis hash and returns the values as a list named by the fields.</p><div class="section">
<h4 id="usage-30">Usage<a class="anchor" aria-label="anchor" href="#usage-30"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">read_hash</span><span class="op">(</span><span class="va">key</span>, <span class="va">fields</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-27">Arguments<a class="anchor" aria-label="anchor" href="#arguments-27"></a></h4>
<p></p><div class="arguments"><dl><dt><code>key</code></dt>
<dd><p>(<code>character(1)</code>)<br>
Key of the hash.</p></dd>


<dt><code>fields</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Fields to be read from the hash.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-16">Returns<a class="anchor" aria-label="anchor" href="#returns-16"></a></h4>
<p>(list of <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
The outer list contains one element for each key.
The inner list is the combination of the lists stored at the different fields.</p>
</div>

</div><p></p><hr><a id="method-Rush-is_running_task"></a><div class="section">
<h3 id="method-is-running-task-">Method <code>is_running_task()</code><a class="anchor" aria-label="anchor" href="#method-is-running-task-"></a></h3>
<p>Checks whether tasks have the status <code>"running"</code>.</p><div class="section">
<h4 id="usage-31">Usage<a class="anchor" aria-label="anchor" href="#usage-31"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">is_running_task</span><span class="op">(</span><span class="va">keys</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-28">Arguments<a class="anchor" aria-label="anchor" href="#arguments-28"></a></h4>
<p></p><div class="arguments"><dl><dt><code>keys</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of the tasks.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-is_failed_task"></a><div class="section">
<h3 id="method-is-failed-task-">Method <code>is_failed_task()</code><a class="anchor" aria-label="anchor" href="#method-is-failed-task-"></a></h3>
<p>Checks whether tasks have the status <code>"failed"</code>.</p><div class="section">
<h4 id="usage-32">Usage<a class="anchor" aria-label="anchor" href="#usage-32"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">is_failed_task</span><span class="op">(</span><span class="va">keys</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-29">Arguments<a class="anchor" aria-label="anchor" href="#arguments-29"></a></h4>
<p></p><div class="arguments"><dl><dt><code>keys</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
Keys of the tasks.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Rush-tasks_with_state"></a><div class="section">
<h3 id="method-tasks-with-state-">Method <code>tasks_with_state()</code><a class="anchor" aria-label="anchor" href="#method-tasks-with-state-"></a></h3>
<p>Returns keys of requested states.</p><div class="section">
<h4 id="usage-33">Usage<a class="anchor" aria-label="anchor" href="#usage-33"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">tasks_with_state</span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-30">Arguments<a class="anchor" aria-label="anchor" href="#arguments-30"></a></h4>
<p></p><div class="arguments"><dl><dt><code>states</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>)<br>
States of the tasks.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-17">Returns<a class="anchor" aria-label="anchor" href="#returns-17"></a></h4>
<p>(Named list of <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code>).</p>
</div>

</div><p></p><hr><a id="method-Rush-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-34">Usage<a class="anchor" aria-label="anchor" href="#usage-34"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Rush</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-31">Arguments<a class="anchor" aria-label="anchor" href="#arguments-31"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># This example is not executed since Redis must be installed</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span>   <span class="va">config_local</span> <span class="op">=</span> <span class="fu">redux</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/redux/man/redis_config.html" class="external-link">redis_config</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">rush</span> <span class="op">=</span> <span class="fu"><a href="rsh.html">rsh</a></span><span class="op">(</span>network_id <span class="op">=</span> <span class="st">"test_network"</span>, config <span class="op">=</span> <span class="va">config_local</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">rush</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;Rush&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Running Workers: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Queued Tasks: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Queued Priority Tasks: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Running Tasks: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Finished Tasks: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Failed Tasks: 0</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marc Becker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

